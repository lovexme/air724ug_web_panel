System.register(["./index-legacy-BsrMlWfZ.js"],(function(e,t){"use strict";var l,a,r,n,i,o,s,u,c,d,g,f,v,p,m,b,h,y,x,k,w,S,C,B,M,V,I,A,z,E,L,P,$,T,q,W,D,j,H,F;return{setters:[e=>{l=e.X,a=e.d,r=e.l,n=e.c,i=e.a6,o=e.a,s=e.ab,u=e.t,c=e.n,d=e.m,g=e.a8,f=e.Z,v=e.L,p=e.w,m=e.as,b=e.am,h=e.at,y=e.af,x=e.au,k=e.e,w=e.r,S=e.a7,C=e.x,B=e.Y,M=e.o,V=e.h,I=e.y,A=e.j,z=e.i,E=e.av,L=e.aw,P=e.p,$=e.b,T=e.W,q=e.ax,W=e.H,D=e.s,j=e.ay,H=e.az,F=e.aA}],execute:function(){e("u",R);let t=0;function R(){const e=l(),{name:a="unknown"}=(null==e?void 0:e.type)||{};return`${a}-${++t}`}const[N,O]=n("cell"),K={tag:d("div"),icon:String,size:String,title:c,value:c,label:c,center:Boolean,isLink:Boolean,border:u,iconPrefix:String,valueClass:s,labelClass:s,titleClass:s,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},X=r({},K,g);var Y=a({name:N,props:X,setup(e,{slots:t}){const l=i(),a=()=>{if(t.label||f(e.label))return o("div",{class:[O("label"),e.labelClass]},[t.label?t.label():e.label])},r=()=>{var l;if(t.title||f(e.title)){const r=null==(l=t.title)?void 0:l.call(t);if(Array.isArray(r)&&0===r.length)return;return o("div",{class:[O("title"),e.titleClass],style:e.titleStyle},[r||o("span",null,[e.title]),a()])}},n=()=>{const l=t.value||t.default;if(l||f(e.value))return o("div",{class:[O("value"),e.valueClass]},[l?l():o("span",null,[e.value])])},s=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return o(v,{name:t,class:O("right-icon")},null)}};return()=>{var a;const{tag:i,size:u,center:c,border:d,isLink:g,required:f}=e,p=null!=(a=e.clickable)?a:g,m={center:c,required:!!f,clickable:p,borderless:!d};return u&&(m[u]=!!u),o(i,{class:O(m),role:p?"button":void 0,tabindex:p?0:void 0,onClick:l},{default:()=>{var l;return[t.icon?t.icon():e.icon?o(v,{name:e.icon,class:O("left-icon"),classPrefix:e.iconPrefix},null):void 0,r(),n(),s(),null==(l=t.extra)?void 0:l.call(t)]}})}}});const Z=e("C",p(Y));function G(e){return Array.isArray(e)?!e.length:0!==e&&!e}function J(e,t){const{message:l}=t;return y(l)?l(e,t):l||""}function Q({target:e}){e.composing=!0}function U({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function _(e){return[...e].length}function ee(e,t){return[...e].slice(0,t).join("")}const[te,le]=n("field"),ae=e("f",{id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:c,max:Number,min:Number,formatter:Function,clearIcon:d("clear"),modelValue:$(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:d("focus"),formatTrigger:d("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String}),re=r({},K,ae,{rows:c,type:d("text"),rules:Array,autosize:[Boolean,Object],labelWidth:c,labelClass:s,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var ne=a({name:te,props:re,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:l}){const a=R(),r=k({status:"unvalidated",focused:!1,validateMessage:""}),n=w(),i=w(),s=w(),{parent:u}=S(T),c=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},d=t=>f(e[t])?e[t]:u&&f(u.props[t])?u.props[t]:void 0,g=C((()=>{const t=d("readonly");if(e.clearable&&!t){const t=""!==c(),l="always"===e.clearTrigger||"focus"===e.clearTrigger&&r.focused;return t&&l}return!1})),p=C((()=>s.value&&l.input?s.value():e.modelValue)),y=C((()=>{var t;const l=d("required");return"auto"===l?null==(t=e.rules)?void 0:t.some((e=>e.required)):l})),$=e=>e.reduce(((e,t)=>e.then((()=>{if("failed"===r.status)return;let{value:e}=p;if(t.formatter&&(e=t.formatter(e,t)),!function(e,t){if(G(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}(e,t))return r.status="failed",void(r.validateMessage=J(e,t));if(t.validator){if(G(e)&&!1===t.validateEmpty)return;return function(e,t){return new Promise((l=>{const a=t.validator(e,t);x(a)?a.then(l):l(a)}))}(e,t).then((l=>{l&&"string"==typeof l?(r.status="failed",r.validateMessage=l):!1===l&&(r.status="failed",r.validateMessage=J(e,t))}))}}))),Promise.resolve()),N=()=>{r.status="unvalidated",r.validateMessage=""},O=()=>t("endValidate",{status:r.status,message:r.validateMessage}),K=(l=e.rules)=>new Promise((a=>{N(),l?(t("startValidate"),$(l).then((()=>{"failed"===r.status?(a({name:e.name,message:r.validateMessage}),O()):(r.status="passed",a(),O())}))):a()})),X=t=>{if(u&&e.rules){const{validateTrigger:l}=u.props,a=q(l).includes(t),r=e.rules.filter((e=>e.trigger?q(e.trigger).includes(t):a));r.length&&K(r)}},Y=(l,a="onChange")=>{var i,o;const s=l;l=(t=>{var l;const{maxlength:a}=e;if(f(a)&&_(t)>+a){const e=c();if(e&&_(e)===+a)return e;const i=null==(l=n.value)?void 0:l.selectionEnd;if(r.focused&&i){const e=[...t],l=e.length-+a;return e.splice(i-l,l),e.join("")}return ee(t,+a)}return t})(l);const u=_(s)-_(l);if("number"===e.type||"digit"===e.type){const t="number"===e.type;if(l=E(l,t,t),"onBlur"===a&&""!==l&&(void 0!==e.min||void 0!==e.max)){const t=L(+l,null!=(i=e.min)?i:-1/0,null!=(o=e.max)?o:1/0);+l!==t&&(l=t.toString())}}let d=0;if(e.formatter&&a===e.formatTrigger){const{formatter:t,maxlength:a}=e;if(l=t(l),f(a)&&_(l)>+a&&(l=ee(l,+a)),n.value&&r.focused){const{selectionEnd:e}=n.value,l=ee(s,e);d=_(t(l))-_(l)}}if(n.value&&n.value.value!==l)if(r.focused){let{selectionStart:e,selectionEnd:t}=n.value;if(n.value.value=l,f(e)&&f(t)){const a=_(l);u?(e-=u,t-=u):d&&(e+=d,t+=d),n.value.setSelectionRange(Math.min(e,a),Math.min(t,a))}}else n.value.value=l;l!==e.modelValue&&t("update:modelValue",l)},te=e=>{e.target.composing||Y(e.target.value)},ae=()=>{var e;return null==(e=n.value)?void 0:e.blur()},re=()=>{var e;return null==(e=n.value)?void 0:e.focus()},ne=()=>{const t=n.value;"textarea"===e.type&&e.autosize&&t&&function(e,t){const l=m();e.style.height="auto";let a=e.scrollHeight;if(b(t)){const{maxHeight:e,minHeight:l}=t;void 0!==e&&(a=Math.min(a,e)),void 0!==l&&(a=Math.max(a,l))}a&&(e.style.height=`${a}px`,h(l))}(t,e.autosize)},ie=e=>{r.focused=!0,t("focus",e),A(ne),d("readonly")&&ae()},oe=e=>{r.focused=!1,Y(c(),"onBlur"),t("blur",e),d("readonly")||(X("onBlur"),A(ne),j())},se=e=>t("clickInput",e),ue=e=>t("clickLeftIcon",e),ce=e=>t("clickRightIcon",e),de=C((()=>"boolean"==typeof e.error?e.error:!(!u||!u.props.showError||"failed"!==r.status)||void 0)),ge=C((()=>{const e=d("labelWidth"),t=d("labelAlign");if(e&&"top"!==t)return{width:B(e)}})),fe=l=>{13===l.keyCode&&(u&&u.props.submitOnEnter||"textarea"===e.type||P(l),"search"===e.type&&ae()),t("keypress",l)},ve=()=>e.id||`${a}-input`,pe=()=>{const t=le("control",[d("inputAlign"),{error:de.value,custom:!!l.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(l.input)return o("div",{class:t,onClick:se},[l.input()]);const r={id:ve(),ref:n,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:d("disabled"),readonly:d("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${a}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:oe,onFocus:ie,onInput:te,onClick:se,onChange:U,onKeypress:fe,onCompositionend:U,onCompositionstart:Q};return"textarea"===e.type?o("textarea",D(r,{inputmode:e.inputmode}),null):o("input",D((i=e.type,s=e.inputmode,"number"===i&&(i="text",null!=s||(s="decimal")),"digit"===i&&(i="tel",null!=s||(s="numeric")),{type:i,inputmode:s}),r),null);var i,s},me=()=>{const t=l["right-icon"];if(e.rightIcon||t)return o("div",{class:le("right-icon"),onClick:ce},[t?t():o(v,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},be=()=>{if(e.showWordLimit&&e.maxlength){const t=_(c());return o("div",{class:le("word-limit")},[o("span",{class:le("word-num")},[t]),W("/"),e.maxlength])}},he=()=>{if(u&&!1===u.props.showErrorMessage)return;const t=e.errorMessage||r.validateMessage;if(t){const e=l["error-message"],a=d("errorMessageAlign");return o("div",{class:le("error-message",a)},[e?e({message:t}):t])}},ye=()=>[o("div",{class:le("body")},[pe(),g.value&&o(v,{ref:i,name:e.clearIcon,class:le("clear")},null),me(),l.button&&o("div",{class:le("button")},[l.button()])]),be(),he()];return M({blur:ae,focus:re,validate:K,formValue:p,resetValidation:N,getValidationStatus:()=>r.status}),H(F,{customValue:s,resetValidation:N,validateWithTrigger:X}),V((()=>e.modelValue),(()=>{Y(c()),N(),X("onChange"),A(ne)})),I((()=>{Y(c(),e.formatTrigger),A(ne)})),z("touchstart",(e=>{P(e),t("update:modelValue",""),t("clear",e)}),{target:C((()=>{var e;return null==(e=i.value)?void 0:e.$el}))}),()=>{const t=d("disabled"),r=d("labelAlign"),n=(()=>{const t=l["left-icon"];if(e.leftIcon||t)return o("div",{class:le("left-icon"),onClick:ue},[t?t():o(v,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return o(Z,{size:e.size,class:le({error:de.value,disabled:t,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:ge.value,valueClass:le("value"),titleClass:[le("label",[r,{required:y.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:n&&"top"!==r?()=>n:null,title:()=>{const t=(()=>{const t=d("labelWidth"),r=d("labelAlign"),n=d("colon")?":":"";return l.label?[l.label(),n]:e.label?o("label",{id:`${a}-label`,for:l.input?void 0:ve(),"data-allow-mismatch":"attribute",onClick:e=>{P(e),re()},style:"top"===r&&t?{width:B(t)}:void 0},[e.label+n]):void 0})();return"top"===r?[n,t].filter(Boolean):t||[]},value:ye,extra:l.extra})}}});e("F",p(ne))}}}));
