System.register(["./index-legacy-BdDj_Ryx.js","./monaco-editor-legacy-CMAgFx0f.js","./index-legacy-D1051dp9.js","./function-call-legacy-QMd1X-Zv.js","./route-block-legacy-wdPIt6g0.js"],(function(e,t){"use strict";var n,r,o,a,i,u,c,l,s,f,d,v,p,g,y,h,m,b,w,j,O,S,k,P;return{setters:[e=>{n=e.d,r=e.N,o=e.O,a=e.x,i=e.P,u=e.h,c=e.r,l=e.y,s=e.j,f=e.M,d=e.v,v=e.z,p=e.A,g=e.H,y=e.a,h=e.Q,m=e.D,b=e.E,w=e.K,j=e._},e=>{O=e.m},e=>{S=e.B},e=>{k=e.s},e=>{P=e.b}],execute:function(){function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?I(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.apply(n,[].concat(o,r))}}}function V(e){return{}.toString.call(e).includes("Object")}function D(e){return"function"==typeof e}var C=R((function(e,t){throw new Error(e[t]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),L={changes:function(e,t){return V(t)||C("changeType"),Object.keys(t).some((function(t){return n=e,r=t,!Object.prototype.hasOwnProperty.call(n,r);var n,r}))&&C("changeField"),t},selector:function(e){D(e)||C("selectorType")},handler:function(e){D(e)||V(e)||C("handlerType"),V(e)&&Object.values(e).some((function(e){return!D(e)}))&&C("handlersType")},initial:function(e){var t;e||C("initialIsRequired"),V(e)||C("initialType"),t=e,Object.keys(t).length||C("initialContent")}};function q(e,t){return D(t)?t(e.current):t}function z(e,t){return e.current=x(x({},e.current),t),t}function B(e,t,n){return D(t)?t(e.current):Object.keys(n).forEach((function(n){var r;return null===(r=t[n])||void 0===r?void 0:r.call(t,e.current[n])})),n}var F,W={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L.initial(e),L.handler(t);var n={current:e},r=R(B)(n,t),o=R(z)(n),a=R(L.changes)(e),i=R(q)(n);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return L.selector(e),e(n.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(r,o,a,i)(e)}]}},N={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},U=(F=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.length>=F.length?F.apply(this,r):function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.apply(t,[].concat(r,o))}})(N),K={config:function(e){var t;return e||U("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||U("configType"),e.urls?(console.warn(N.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};function H(e,t){return Object.keys(t).forEach((function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],H(e[n],t[n]))})),M(M({},e),t)}var Q={type:"cancelation",msg:"operation is manually canceled"};function Y(e){var t=!1,n=new Promise((function(n,r){e.then((function(e){return t?r(Q):n(e)})),e.catch(r)}));return n.cancel=function(){return t=!0},n}var $,G,J=W.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),X=(G=2,function(e){if(Array.isArray(e))return e}($=J)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}($,G)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}($,G)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Z=X[0],ee=X[1];function te(e){return document.body.appendChild(e)}function ne(e){var t,n,r=Z((function(e){return{config:e.config,reject:e.reject}})),o=(t="".concat(r.config.paths.vs,"/loader.js"),n=document.createElement("script"),t&&(n.src=t),n);return o.onload=function(){return e()},o.onerror=r.reject,o}function re(){var e=Z((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],(function(t){oe(t),e.resolve(t)}),(function(t){e.reject(t)}))}function oe(e){Z().monaco||ee({monaco:e})}var ae=new Promise((function(e,t){return ee({resolve:e,reject:t})})),ie={config:function(e){var t=K.config(e),n=t.monaco,r=T(t,["monaco"]);ee((function(e){return{config:H(e.config,r),monaco:n}}))},init:function(){var e=Z((function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}}));if(!e.isInitialized){if(ee({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Y(ae);if(window.monaco&&window.monaco.editor)return oe(window.monaco),e.resolve(window.monaco),Y(ae);!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(te,ne)(re)}return Y(ae)},__getMonacoInstance:function(){return Z((function(e){return e.monaco}))}},ue=Object.defineProperty,ce=Object.defineProperties,le=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ve=(e,t,n)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pe=(e,t)=>{for(var n in t||(t={}))fe.call(t,n)&&ve(e,n,t[n]);if(se)for(var n of se(t))de.call(t,n)&&ve(e,n,t[n]);return e};const ge={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function ye(e,t){return{wrapperStyle:a((()=>{const{width:t,height:n}=e;return r=pe({},ge.wrapper),ce(r,le({width:t,height:n}));var r})),containerStyle:a((()=>pe(pe({},ge.fullWidth),!t.value&&ge.hide)))}}function he(e){return"function"==typeof e?e():e}function me(e){return void 0===e}function be(e,t,n,r){return function(e,t){return e.editor.getModel(we(e,t))}(e,r)||function(e,t,n,r){return e.editor.createModel(t,n,r?we(e,r):void 0)}(e,t,n,r)}function we(e,t){return e.Uri.parse(t)}var je=Object.defineProperty,Oe=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,Pe=(e,t,n)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Ie={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var Me=n({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,t){const n=new Map,r=o(null),{monacoRef:f,unload:d,isLoadFailed:v}=function(){const e=o(ie.__getMonacoInstance()),t=c(!1);let n;return l((()=>{e.value||(n=ie.init(),n.then((t=>e.value=t)).catch((e=>{"cancelation"!==(null==e?void 0:e.type)&&(t.value=!0,console.error("Monaco initialization error:",e))})))})),{monacoRef:e,unload:()=>null==n?void 0:n.cancel(),isLoadFailed:t}}(),{editorRef:p}=function({emit:e},t,n,r){const a=o(null);function i(){var o;if(!r.value||!n.value||a.value)return;e("beforeMount",n.value);const i=t.path||t.defaultPath,u=be(n.value,t.value||t.defaultValue||"",t.language||t.defaultLanguage||"",i||"");a.value=n.value.editor.create(r.value,((e,t)=>{for(var n in t||(t={}))Se.call(t,n)&&Pe(e,n,t[n]);if(Oe)for(var n of Oe(t))ke.call(t,n)&&Pe(e,n,t[n]);return e})({model:u,theme:t.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},t.options),t.overrideServices),null==(o=a.value)||o.onDidChangeModelContent((n=>{const r=a.value.getValue();r!==t.value&&(e("update:value",r),e("change",r,n))})),a.value&&!me(t.line)&&a.value.revealLine(t.line),e("mount",a.value,n.value)}return l((()=>{const e=u(n,(()=>{r.value&&n.value&&(s((()=>e())),i())}),{immediate:!0})})),{editorRef:a}}(t,e,f,r),{disposeValidator:g}=function({emit:e},t,n,r){const o=c(null),a=u([n,r],(()=>{if(n.value&&r.value){s((()=>a()));const t=n.value.editor.onDidChangeMarkers((t=>{var o,a;const i=null==(a=null==(o=r.value)?void 0:o.getModel())?void 0:a.uri;if(i&&t.find((e=>e.path===i.path))){const t=n.value.editor.getModelMarkers({resource:i});e("validate",t)}}));o.value=()=>null==t?void 0:t.dispose()}}));return{disposeValidator:o}}(t,0,f,p),y=a((()=>!!f.value&&!!p.value)),{wrapperStyle:h,containerStyle:m}=ye(e,y);return i((()=>{var e,t;null==(e=g.value)||e.call(g),p.value?(null==(t=p.value.getModel())||t.dispose(),p.value.dispose()):d()})),u([()=>e.path,()=>e.value,()=>e.language,()=>e.line],(([t,r,o,a],[i,u,c,l])=>{if(y.value){if(t!==i){const u=be(f.value,r||e.defaultValue||"",o||e.defaultLanguage||"",t||e.defaultPath||"");return e.saveViewState&&n.set(i,p.value.saveViewState()),p.value.setModel(u),e.saveViewState&&p.value.restoreViewState(n.get(t)),void(me(a)||p.value.revealLine(a))}p.value.getValue()!==r&&p.value.setValue(r),o!==c&&f.value.editor.setModelLanguage(p.value.getModel(),o),me(a)||a===l||p.value.revealLine(a)}})),u((()=>e.options),(e=>p.value&&p.value.updateOptions(e)),{deep:!0}),u((()=>e.theme),(e=>f.value&&f.value.editor.setTheme(e))),{containerRef:r,isEditorReady:y,isLoadFailed:v,wrapperStyle:h,containerStyle:m}},render(){const{$slots:e,isEditorReady:t,isLoadFailed:n,wrapperStyle:o,containerStyle:a,className:i}=this;return r("div",{style:o},[!t&&r("div",{style:Ie},n?e.failure?he(e.failure):"load failed":e.default?he(e.default):"loading..."),r("div",{ref:"containerRef",key:"monaco_editor_container",style:a,class:i})])}});function Te(e){return new Worker("/assets/editor.worker-BF8sMY45.js",{name:e?.name})}function Ee(e){return new Worker("/assets/json.worker-BoBKUCni.js",{name:e?.name})}function _e(e){return new Worker("/assets/css.worker-CffjfGaH.js",{name:e?.name})}function Ae(e){return new Worker("/assets/html.worker-BnkIKlUq.js",{name:e?.name})}function xe(e){return new Worker("/assets/ts.worker-58P_SjQh.js",{name:e?.name})}const Re={class:"config-edit-page"},Ve={class:"editor-container"},De={class:"footer"},Ce=n({__name:"index",setup(e){globalThis.MonacoEnvironment={getWorker:(e,t)=>"json"===t?new Ee:"css"===t||"scss"===t||"less"===t?new _e:"html"===t||"handlebars"===t||"razor"===t?new Ae:"typescript"===t||"javascript"===t?new xe:new Te},ie.config({monaco:O});const t=f(),n=d(),r=c(t.query.device?JSON.parse(t.query.device):{}),o=c(""),a=c(!1),i=c(0);async function u(){if(r.value?.imei){a.value=!0;try{(await w.post("/executeTask",{imei:r.value.imei,task:"set_config",configText:o.value})).success?(k("保存成功"),n.back()):k("保存失败")}catch{k("保存失败")}finally{a.value=!1}}}return async function(){if(r.value?.imei){a.value=!0;try{const e=await w.post("/executeTask",{imei:r.value.imei,task:"get_config"});e.success?o.value=e.result||"":k("获取配置失败")}catch{k("获取配置失败")}finally{a.value=!1,i.value=2}}}(),(e,t)=>{const n=S;return p(),v("div",Re,[g("div",Ve,[y(h(Me),{value:o.value,"onUpdate:value":t[0]||(t[0]=e=>o.value=e),language:"lua",theme:"vs-dark",options:{fontSize:14}},null,8,["value"])]),g("div",De,[y(n,{block:"",type:"primary",loading:a.value,onClick:u},{default:m((()=>t[1]||(t[1]=[b(" 保存配置 ")]))),_:1,__:[1]},8,["loading"])])])}}});"function"==typeof P&&P(Ce),e("default",j(Ce,[["__scopeId","data-v-12f65444"]]))}}}));
